class Theme{
  constructor(){
    this.globalInit = this.globalInit.bind(this);
    this.initProductPage = this.initProductPage.bind(this);
  }

  globalInit(){
    this.handleInputValidation();
    this.initHeader();
    this.lazyLoadImages();
  }
  handleInputValidation(){
    let inputs = $('.js-inputCheck input, .js-inputCheck select');
    inputs.change(function(){
      if($(this).val() != ''){
        $(this).parent().addClass('active');
      }else{
        $(this).parent().removeClass('active');
      }
    });
  }
  lazyLoadImages(){
    var bLazy = new Blazy({
      success: function(element){
        setTimeout(function(){
        var parent = element.parentNode;
        parent.className = parent.className.replace(/\bloading\b/,'');
          }, 200);
      }
    });
  }
  initHeader(){
    let menu = $('.js-nav-menu');
    let header = $('.js-header');
    let hamburger = $('.js-hamburger');
    let body = $('body');

    if($(window).width() > 550){
      menu.mouseenter(function(){
        header.addClass('active');
      });
  
      header.mouseleave(function(){
        header.removeClass('active');
      });
    }else{
      hamburger.click(function(){
        header.toggleClass('active');
        body.toggleClass('fixed');
      });

      $('.js-navLinkOne').click(function(e){
        e.preventDefault();
        $(this).parent().toggleClass('active');
      });
    }
  }
  initProductPage(){
    //Product Thumbs Slider
    $('.js-thumbsSlider').slick({
      slidesToShow: 6,
      arrows: false,
      infinite: false,
      responsive:[
        {
          breakpoint: 600,
          settings:{
            slidesToShow: 1,
            dots: true,
            appendDots:'.js-thumbsDots'
          }
        }
      ]
    });
    //Mobile Thumbs Slider
    $('.js-thumbsMobileSlider').slick({
      slidesToShow: 6,
      arrows: false,
      infinite: false,
      responsive:[
        {
          breakpoint: 600,
          settings:{
            slidesToShow: 1,
            dots: true,
            appendDots:'.js-thumbsMobileDots'
          }
        }
      ]
    });
    //Thumbnail Image Switching
    $(document).on('click', '#ProductThumbs img', function(event) {
      $('.js-thumbsImage').removeClass('active');
      $(this).addClass('active');
      concrete.Images.switchImage($('#ProductPhoto img')[0], $(this, event.target)[0]);
    });

    //Handle Size Variant Change
    let sizeVariantButtons = $('.js-sizeVariantButton');
    let sizeOptionSelector = $('.js-selector--Size');

    sizeVariantButtons.click(function(){
      let value = $(this).val();
      sizeVariantButtons.removeClass('active');
      $(this).addClass('active');
      sizeOptionSelector.val(value);
      sizeOptionSelector.trigger('change');
    });
    
    //Related Products Slider
    $('.js-relatedProducts').slick({
      nextArrow:'.js-relatedNext',
      prevArrow:'.js-relatedPrev',
      arrows: true,
      fade: true,
      responsive:[
        {
          breakpoint: 600,
          settings:{
            slidesToShow: 1,
            dots: true,
            arrows: false,
            appendDots:'.js-relatedDots'
          }
        }
      ]
    });
  }
}